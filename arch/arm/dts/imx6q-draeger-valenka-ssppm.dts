/*
 *  (C) Copyright 2020 Draeger and Licensors, info@draeger.com
 *
 *  SPDX-License-Identifier: GPL-2.0+
 *  Device Tree file for Drager Valenka Mount Board
 */

/dts-v1/;

#include "imx6q.dtsi"
/* PAD config disabled in imx6qdl-draeger-m48.dtsi by setting value to 0x80000000
 * PAD configuration register must not be 0, so it is set to 0xfff
 */
#define MX6QDL_PAD_CTL_GRP_DDR_TYPE_RGMII        0x790 0xfff 0x000 0x000C0000 0x0
#define MX6QDL_PAD_CTL_GRP_RGMII_TERM            0x7ac 0xfff 0x000 0x00000000 0x0

#include "imx6qdl-draeger-valenka.dtsi"

/ {
	model = "Draeger Valenka SSPPM";
	compatible = "draeger,m48/q", "fsl,imx6dl";

	aliases {
		ethphy = &ethphy;
		eeprom_mac = &eeprom_mac;
	};
	
	config {
		rotate_screen;
	};
};

&i2c3_mux {
	i2c3_7: i2c@7 {
		#address-cells = <1>;
		#size-cells = <0>;
		reg = <7>;

		eeprom_mac: eeprom@54 {
			compatible = "atmel,24c01";
			reg = <0x54>;
			pagesize = <16>;
		};
	};
};

&fec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_valenka_enet &pinctrl_valenka_enet_gpio>;
	phy-mode = "rgmii";
	phy-handle = <&ethphy>;
	phy-reset-gpios = <&gpio1 29 1>;
	phy-reset-duration = <10>;
	phy-reset-post-delay = <100>;
	enable-optics-gpios = <&gpio5 6 0>;
	status = "okay";

	mdio {
		#address-cells = <1>;
		#size-cells = <0>;

		ethphy: ethernet-phy@0 {
			reg = <0>;
			status = "okay";
		};
	};
};
